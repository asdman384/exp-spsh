<div class="form">
  <mat-tab-group
    class="user-selector"
    [(selectedIndex)]="currentSheetIndex"
    (selectedIndexChange)="formChanged($event, currentMonthIndex, sheets)"
  >
    @for (sheet of sheets; track sheet.id) {
    <mat-tab [label]="sheet.title.split('_')[1]"></mat-tab>
    }
  </mat-tab-group>

  <mat-tab-group
    #monthSelector
    class="month-selector"
    [(selectedIndex)]="currentMonthIndex"
    (selectedIndexChange)="formChanged(currentSheetIndex, $event, sheets)"
  >
    @for (tab of monthTabs; track tab; let i = $index) {
    <mat-tab [label]="tab"></mat-tab>
    }
  </mat-tab-group>
</div>

@if ((expenses$ | async) || []; as expenses) {
<expenses-table
  #summaryTable
  [selected]="expenses"
  [selectable]="selectable"
  [dataSource]="expenses"
  (onCellClick)="expensesTableCellClickHandler($event)"
  (onSelection)="onSelection($event)"
></expenses-table>
}

<div class="statistics-summary">
  <div class="button-container">
    @if (selectedCategory) {
    <button mat-icon-button (click)="unCategory()"><mat-icon>undo</mat-icon></button>
    }
  </div>
  <div style="font-weight: 500">{{ selectedCategory ?? 'Total' }}</div>
  <div style="font-weight: 500">{{ total }}</div>
</div>
