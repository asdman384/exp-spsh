<div class="info">
  <div class="loading-container">
    @if (loading) {
    <mat-progress-spinner color="primary" mode="indeterminate" [value]="0"> </mat-progress-spinner>
    }
    <mat-icon class="doc-icon" color="primary">description</mat-icon>
  </div>
</div>

<form #form="ngForm" class="info full-width">
  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Spreadsheet URL</mat-label>
    <textarea
      matInput
      [name]="spreadsheetIdField"
      [ngModel]="spreadsheetId | async"
      [required]="true"
      rows="3"
      autocomplete="off"
    ></textarea>
    <mat-icon matSuffix>help_outline</mat-icon>
  </mat-form-field>

  <mat-form-field appearance="outline" class="readonly">
    <mat-label>Data Sheet id</mat-label>
    <input [name]="sheetField" matInput [ngModel]="(sheet$ | async)?.id" readonly />
    <mat-icon [class]="sheetDone ? 'icon-green' : 'icon-gray'" matPrefix>task</mat-icon>
  </mat-form-field>

  <mat-form-field appearance="outline" class="readonly">
    <mat-label>Categories Sheet id</mat-label>
    <input [name]="categoriesSheetIdField" matInput [ngModel]="categoriesSheetId | async" readonly />
    <mat-icon [class]="categoriesSheetDone ? 'icon-green' : 'icon-gray'" matPrefix>task</mat-icon>
  </mat-form-field>

  <button mat-flat-button color="primary" (click)="checkSetup(form, state)" [disabled]="!form.valid || loading">
    {{ state }}
  </button>
</form>
